function document_ajax(t,a,n){var e=$(".document-nav-container").addClass("is-loading");a.one_cat=e.attr("one-cat"),a.action="documentnav_posts",n=n||_win.ajax_url,$.ajax({type:"POST",url:n,data:a,dataType:"json",error:function(t){var a="操作失败 "+t.status+" "+t.statusText+"，请刷新页面后重试";t.responseText&&t.responseText.indexOf("致命错误")>-1&&(a="网站遇到致命错误，请检查插件冲突或通过错误日志排除错误"),notyf(a,"danger")},success:function(a){!a.error&&a.html||notyf("操作失败，请刷新页面后重试","danger"),a.html&&e.html(a.html),a.history_search&&$(".history-search>div").html(a.history_search),setTimeout(function(){e.removeClass("is-loading")},20),setTimeout(function(){t.removeClass("is-loading")},300)}})}$(".document-search form").submit(function(){var t=$(this),a=$(".document-search"),n=t.find('[name="s"]').val();if(!n.length)return notyf("请输入搜索关键词","warning"),!1;if(n.length<2)return notyf("关键词太短，请重新输入","warning"),!1;a.addClass("is-loading");var e={search:n};return $(".cat-load").removeClass("is-loading active"),document_ajax(a,e),!1}),_win.bd.on("click",".cat-load",function(t){$(".cat-load").removeClass("is-loading active");var a=$(this);a.addClass("is-loading active");var n={cat_id:a.attr("cat-id")};return document_ajax(a,n),!1}),_win.bd.on("click",".document-search .search_keywords",function(t){var a=$(this),n=a.text();return $('.document-search form [name="s"]').val(n).trigger("input"),$(".document-search form").submit(),!1}),_win.bd.on("click",".document-nav-container .pagenav a",function(t){var a=$(this);return document_ajax(a,{},a.attr("href")),!1}),_win.bd.on("click",".new-posts-submit",function(){var t=$(this),a=t.attr("action"),n=t.parents("form"),e=n.serializeObject();e.action=a,e.post_content=tinyMCE.activeEditor.getContent(),zib_ajax(t,e,function(t){t.url&&$(".view-btn").html('<a target="_blank" href="'+t.url+'" class="but c-blue"><i class="fa fa-file-text-o"></i> 预览文章</a>'),t.time&&$(".modified-time").html('<span class="badg">最后保存：'+t.time+"</div>"),t.ok&&$(".form-control").val(""),t.singin&&$(".signin-loader").click(),t.posts_id&&n.find('input[name="posts_id"]').val(t.posts_id),t.open_url&&(window.location.href=t.open_url,window.location.reload)})});